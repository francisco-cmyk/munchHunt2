import{r as l,j as t,R as Qe}from"./react-DGI8dM3C.js";import{c as Ye}from"./react-dom-b4hKtrb9.js";import{B as Xe}from"./react-router-dom-DivpCb3t.js";import{c as Ze}from"./class-variance-authority-Bb4qSo10.js";import{c as et}from"./clsx-B-dksMZM.js";import{t as tt}from"./tailwind-merge-Dnoi3Axr.js";import{S as st,R as ne,L as re,T as le,C as ie,a as at,b as oe,c as de,P as nt,d as ce,I as ue,e as me,f as xe,g as he,h as fe,i as ge,j as rt,k as lt,l as it,H as ot,m as pe,n as be,o as dt}from"./@radix-ui-Bh-m1QIu.js";import{u as R,a as ct,Q as ut,b as mt}from"./@tanstack-CU6xdDnn.js";import{a as I}from"./axios-CCb-kr4I.js";import{B as k,Q as xt}from"./react-toastify-BVbbxNjI.js";import{g as _,S as ht}from"./gsap-aLfjG8Xb.js";import{l as je}from"./lodash-B2xE5lR3.js";import{S as ft,M as gt,L as ve,a as A,N as W,U as pt,b as bt,c as jt,d as vt,e as wt,A as yt,f as Nt,g as we,X as Ct,P as ye,C as kt,h as St,i as Ft,j as It,k as Ne,l as At,F as Rt}from"./lucide-react-pPnVFvZF.js";import{u as O,a as Mt,O as Pt,b as Lt,c as L}from"./react-router-DnBnZorh.js";import{X as M,a as Y}from"./@animxyz-SeRGwhjc.js";import{A as Dt,M as zt,a as $t}from"./@vis.gl-SOIDlmmd.js";import{u as Ot}from"./embla-carousel-react-D0f-K6Dr.js";import"./fast-deep-equal-DaaPHwIQ.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BqeRHQGj.js";import"./@floating-ui-CkEE1Vs5.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-BtDH5Z3G.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-BwMvVca_.js";import"./react-style-singleton-C4bOnJcv.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-DsFKy-tc.js";import"./use-callback-ref-CTj7EO4d.js";import"./prop-types-0bS2mDde.js";import"./react-transition-group-CJ63pMoa.js";import"./@babel-CFI5ZLdb.js";import"./dom-helpers-D0mFdbeO.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-v-CXq_RL.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function c(...e){return tt(et(e))}function q(e){return function(a){return e(n=>({...n,...a}))}}function Tt(e,s,a){return e>s&&e<a}function Ht(e){return(e*.000621371192).toFixed(2).toString()}function X(e){const s=Math.floor(Math.random()*e.length);return e[s]}function Et(e,s){const a=new Set,n=[];for(;n.length<s;){const r=Math.floor(Math.random()*e.length);a.has(r)||(n.push(e[r]),a.add(r))}return n}function Bt(e){if(!e)return;const s=e.split(",");return s.length>2?s.slice(0,-2).join(",").trim():e}function Ce(e,s){return e=Z(e),s=Z(s),`${e} - ${s}`}function Z(e){let s=parseInt(e.slice(0,2),10),a=e.slice(2);const n=s>=12?"PM":"AM";return s=s%12||12,`${s}:${a} ${n}`}const _t=Ze("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",disabled:"bg-gray-400 text-gray-700 cursor-not-allowed"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),y=l.forwardRef(({className:e,variant:s,disabled:a,size:n,asChild:r=!1,...i},d)=>{const f=r?st:"button";return t.jsx(f,{disabled:a,className:c(_t({variant:a?"disabled":s,size:n,className:e})),onClick:a?void 0:i.onClick,ref:d,...i})});y.displayName="Button";const ke=l.forwardRef(({className:e,type:s,...a},n)=>t.jsx("input",{type:s,className:c("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 pl-16 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-slate-200 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...a}));ke.displayName="Input";const Se=l.createContext({currentAddress:"",setCurrentAddress:e=>{},currentCoordinates:{latitude:"",longitude:""},setCoordinates:e=>{},munchHuntChoice:"",setMunchHuntChoice:e=>{}}),Wt=({children:e})=>{const[s,a]=l.useState(""),[n,r]=l.useState({latitude:"",longitude:""}),[i,d]=l.useState(""),[f,w]=l.useState(""),x={currentAddress:s,setCurrentAddress:b=>{a(b)},currentCoordinates:n,setCoordinates:b=>{r(b),localStorage.setItem("location",JSON.stringify(b))},result:i,setResult:b=>{d(b)},munchHuntChoice:f,setMunchHuntChoice:b=>{w(b)}};return l.useEffect(()=>{let b=localStorage.getItem("location"),g=localStorage.getItem("choice");b&&r(JSON.parse(b)),g&&w(g)},[]),t.jsx(Se.Provider,{value:x,children:e})},G=()=>l.useContext(Se);async function qt(e){if(!(!e.latitude&&!e.longitude))try{const a=await I.get("/.netlify/functions/getAddress",{params:{latitude:e.latitude,longitude:e.longitude}});if(a.data.results.length>0)return a.data.results[0].formatted_address}catch{k.error("There was a problem gathering your location",{toastId:"fetchAddress"})}}function Gt(e){return R({queryKey:["formattedAddress",e],queryFn:async()=>await qt(e),enabled:!!(e.latitude&&e.longitude)})}function Kt(){return ct({mutationKey:["getCoordinates"],mutationFn:async e=>{const a=(await I.get("/.netlify/functions/getCoordinates",{params:{address:e}})).data.results[0].geometry.location;let n={latitude:"",longitude:""};return typeof a.lat=="number"&&typeof a.lng=="number"&&(n={latitude:a.lat.toString(),longitude:a.lng.toString()}),n},onError:e=>{k.error("There was a problem gathering coordinates from your address. Please refresh the page.",{toastId:"fetchCoordinates"})}})}async function Vt(e){if(e.length!==0)try{const s=await I.post("/.netlify/functions/getAutocomplete",{input:e});return s?s.data.predictions:[]}catch{k.error("Error fetching autocomplete results:",{toastId:"fetchAutoComplete"})}}function Ut(e,s){return R({queryKey:["autoComplete",e],queryFn:async()=>(await Vt(e)).map(n=>({description:n.description,placeID:n.place_id,terms:n.terms,types:n.types})),enabled:e.length>0&&s})}const Fe=l.createContext(void 0),Jt=({children:e})=>{const[s,a]=l.useState(()=>localStorage.getItem("theme")==="dark");return l.useEffect(()=>{const n=document.documentElement;s?(n.classList.add("dark"),document.body.className="bg-slate-950",localStorage.setItem("theme","dark")):(n.classList.remove("dark"),document.body.className="bg-slate-50",localStorage.setItem("theme","light"))},[s]),t.jsx(Fe.Provider,{value:{isDarkMode:s,setIsDarkMode:a},children:e})},K=()=>{const e=l.useContext(Fe);if(!e)throw new Error("useDarkMode must be used within a DarkModeProvider");return e};function V(){const{isDarkMode:e,setIsDarkMode:s}=K();return t.jsx(y,{size:"icon",variant:"ghost",onClick:()=>s(!e),children:e?t.jsx(ft,{}):t.jsx(gt,{})})}_.registerPlugin(ht);const Qt={addresssInput:"",debouncedInput:"",isInvalidAddress:!1,isLoadingAddress:!1};function Yt(){const[e,s]=l.useState(Qt),a=q(s);K();const n=G(),r=O(),i=l.useRef([]),d=l.useRef(null),f=Kt(),{data:w,isFetching:x}=Gt(n.currentCoordinates),{data:b=[]}=Ut(e.debouncedInput,e.debouncedInput.length>0);l.useEffect(()=>{const o=p=>{p.key=="Enter"&&e.addresssInput.length>0&&C()};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[e.addresssInput]),l.useEffect(()=>{if(w&&e.addresssInput.length===0){const o=Bt(w);a({addresssInput:o})}},[w]),l.useEffect(()=>{i.current.forEach(o=>{_.fromTo(o,{opacity:0,y:-50},{opacity:1,y:0,duration:1,scrollTrigger:{trigger:o,start:"top 80%",end:"bottom 25%",toggleActions:"play none none none"}})})},[]);const g=l.useMemo(()=>je.debounce(o=>{a({debouncedInput:o})},300),[]);async function C(){if(e.addresssInput.length===0||!e.addresssInput){k.error("Please provide an address to search for food",{toastId:"provideAddress"});return}const o=await f.mutateAsync(e.addresssInput);if(o){const p={latitude:o.latitude,longitude:o.longitude};n.setCoordinates(p),localStorage.setItem("location",JSON.stringify(p))}_.to(d.current,{opacity:0,ease:"sine.out"}),n.setCurrentAddress(e.addresssInput),setTimeout(()=>{a({addresssInput:""}),r("/select")},200)}function u(){navigator.geolocation&&(a({isLoadingAddress:!0}),navigator.geolocation.getCurrentPosition(o=>{if(o.coords){const p={latitude:o.coords.latitude.toString(),longitude:o.coords.longitude.toString()};n.setCoordinates(p),localStorage.setItem("location",JSON.stringify(p)),a({isLoadingAddress:!1})}},o=>{console.warn(`ERROR:${o.code}, ${o.message}`),a({isLoadingAddress:!1}),k.error("There was a problem getting your location. Please type in an address.",{toastId:"fetchGeolocation"})}))}function m(o){a({addresssInput:o})}function j(o){a({addresssInput:o,debouncedInput:""})}const N=b.filter(o=>o.description!==e.addresssInput);return t.jsxs("div",{className:"flex flex-col min-h-screen",children:[t.jsxs("header",{className:"px-4 lg:px-6 sm:h-20 h-14 flex items-center justify-between  bg-customOrange dark:bg-slate-800",children:[t.jsx("span",{className:"font-bold font-archivo text-slate-800 dark:text-slate-50 md:text-3xl text-2xl",children:"Munch Hunt"}),t.jsx(V,{})]}),t.jsxs("main",{className:"flex-1",children:[t.jsx("section",{className:"w-full py-12 md:py-24 lg:py-32 xl:py-32 2xl:py-48",children:t.jsx("div",{className:"container px-4 md:px-6",children:t.jsxs("div",{className:"flex flex-col items-center space-y-4 text-center",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl lg:text-6xl/none",children:"Can't decide what to eat?"}),t.jsx("p",{className:"mx-auto max-w-[700px] text-gray-500 md:text-xl dark:text-gray-400",children:"Let us help you discover your next favorite meal"})]}),t.jsxs("div",{className:"flex sm:flex-row flex-col gap-3",children:[t.jsxs("div",{ref:d,className:"relative md:w-96 w-64",children:[t.jsx(y,{className:"absolute z-10 inset-y-0 left-0 dark:bg-slate-700 dark:text-white sm:flex h-full items-center rounded-tr-none rounded-br-none",onClick:u,children:e.isLoadingAddress||x?t.jsx(ve,{className:"animate-spin "}):t.jsx(A,{})}),t.jsx(ke,{id:"address-input",className:"h-12 border-2 border-slate-900/10 bg-white dark:text-slate-900 pl-14 text-base shadow-lg placeholder:text-slate-900/50 ",placeholder:"Enter your location",type:"text",value:e.addresssInput,onChange:o=>{g(o.target.value),m(o.target.value)}})]}),t.jsxs(y,{size:"lg",className:"h-12 bg-slate-900 dark:bg-slate-700 dark:text-white text-base hover:bg-slate-800",onClick:C,children:[t.jsx(W,{className:"mr-2 h-5 w-5"}),"Find Food"]}),t.jsx("div",{className:`mt-12 absolute z-30 max-h-44 min-h-32 md:w-96  overflow-auto flex flex-col rounded-lg
                  ${N.length>0?"animate-slideDown rounded-md shadow-lg bg-slate-50":"animate-slideUp "} `,children:N.map((o,p)=>t.jsxs(y,{className:"flex max-w-full justify-start text-slate-800 dark:bg-slate-100 font-roboto hover:bg-slate-400 hover:text-white sm:text-[15px] text-[10px] rounded-none text-wrap ",variant:"outline",onClick:()=>j(o.description),children:[t.jsx(A,{}),o.description]},`${o.placeID}-${p}`))})]}),t.jsx("p",{className:"font-roboto sm:text-sm text-xs text-slate-700 dark:text-slate-100 mt-2",children:e.isLoadingAddress?"Looking for address...":"Enter location or click map pin button"})]})})}),t.jsx("section",{className:"w-full py-12 md:py-24 xl:py-28 2xl:py-32 bg-gray-100 dark:bg-gray-800 ",children:t.jsx("div",{className:"container px-4 md:px-6",children:t.jsxs("div",{className:"grid gap-10 sm:grid-cols-2 md:grid-cols-3",children:[t.jsxs("div",{ref:o=>{o&&(i.current[0]=o)},className:"flex flex-col",children:[t.jsx("div",{className:"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-lg bg-[#FF7043]/10 dark:bg-slate-700",children:t.jsx(pt,{className:"h-6 w-6 text-[#FF7043] dark:text-slate-300"})}),t.jsx("h3",{className:"mb-2 text-xl font-semibold tracking-tight",children:"Hungry and indecisive?"}),t.jsx("p",{className:"sm:text-base text-sm text-slate-600 dark:text-slate-300",children:"Planning date night but unsure where to go? Craving something new but can't decide what? Don’t worry—Munch Hunt has you covered!"})]}),t.jsxs("div",{ref:o=>{o&&(i.current[1]=o)},className:"flex flex-col",children:[t.jsx("div",{className:"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-lg bg-[#FF7043]/10 dark:bg-slate-700",children:t.jsx(W,{className:"h-6 w-6 text-[#FF7043] dark:text-slate-300"})}),t.jsx("h3",{className:"mb-2 text-xl font-semibold tracking-tight",children:"How it works"}),t.jsx("p",{className:"sm:text-base text-sm text-slate-600 dark:text-slate-300",children:"Explore cuisine categories or leave it to chance with a randomized pick. We'll show all nearby restaurants within 25 miles that match your choice."})]}),t.jsxs("div",{ref:o=>{o&&(i.current[2]=o)},className:"flex flex-col",children:[t.jsx("div",{className:"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-lg bg-[#FF7043]/10 dark:bg-slate-700",children:t.jsx(A,{className:"h-6 w-6 text-[#FF7043] dark:text-slate-300"})}),t.jsx("h3",{className:"mb-2 text-xl font-semibold tracking-tight",children:"Let's start hunting!"}),t.jsx("p",{className:"sm:text-base text-sm text-slate-600 dark:text-slate-300",children:"Just provide an address — Munch Hunt won't save it or use it for any other purpose"})]})]})})})]}),t.jsx("footer",{className:"border-t border-slate-200 dark:border-slate-600 px-4 py-6",children:t.jsx("div",{className:"mx-auto max-w-6xl",children:t.jsxs("div",{className:"flex flex-col items-center justify-between md:gap-4 gap-2 sm:text-left text-center  text-sm text-slate-600 dark:text-slate-200 sm:flex-row",children:[t.jsx("p",{children:"© 2024 Munch Hunt. All rights reserved."}),t.jsx("p",{className:"hover:text-customOrange hover:dark:text-slate-600",children:t.jsx("a",{href:"https://github.com/francisco-cmyk",target:"_blank",children:"Developer"})}),t.jsxs("p",{className:"flex items-center md:gap-1 gap-2",children:[t.jsx("span",{className:"sm:block hidden",children:"Powered by Yelp Fusion"}),t.jsx("span",{className:"sm:hidden block",children:"Yelp Fusion"}),t.jsx("span",{children:"•"}),t.jsx("span",{className:"sm:block hidden",children:"Illustrations by Storyset"}),t.jsx("span",{className:"sm:hidden block",children:" Storyset"})]})]})})})]})}function Xt(){K();const e=Mt(),s=O();function a(r){r.preventDefault(),localStorage.removeItem("location"),s("/")}const n=e.pathname==="/"||e.pathname==="/location"||e.pathname==="/restaurants";return t.jsxs("div",{className:"sm:min-h-screen min-h-dvh flex flex-col font-inter relative bg-slate-50 dark:bg-slate-950 cursor-default",children:[n?null:t.jsxs("header",{className:" sm:h-20 h-14 w-full bg-customOrange dark:bg-slate-600 p-3 flex justify-between items-center fixed z-20 top-0 left-0 cursor-default shadow-[0px_4px_6px_rgba(0,0,0,0.1)]",children:[t.jsx("div",{onClick:r=>a(r),children:t.jsx("p",{className:"font-archivo font-black md:text-3xl text-2xl ml-3 ",children:"Munch Hunt"})}),t.jsx("div",{children:t.jsx(V,{})})]}),t.jsx("main",{className:`flex-1 overflow-y-auto ${n?"":"mt-16"}`,children:t.jsx(Pt,{})})]})}function Zt(e){function s(){return e.onClose?e.onClose():null}const a=e.isOpen??!0;return t.jsx("div",{className:"fixed inset-0 flex justify-center items-center z-[100] visible bg-black  bg-opacity-50",onClick:s,children:t.jsx("div",{className:c(`flex flex-col p-4 rounded-lg  max-w-full max-h-full sm:bg-slate-50  ${a?"animate-scrollOpen":"animate-scrollClose"}`,e.class),onClick:n=>n.stopPropagation(),children:t.jsx(t.Fragment,{children:e.children})})})}const ee=["Afghan","African","Senegalese","South African","American (New)","American (Traditional)","Arabian","Argentine","Armenian","Asian Fusion","Australian","Austrian","Bangladeshi","Barbeque","Basque","Belgian","Brasseries","Brazilian","Breakfast & Brunch","British","Buffets","Burgers","Burmese","Cafes","Cafeteria","Cajun/Creole","Cambodian","Caribbean","Dominican","Haitian","Puerto Rican","Trinidadian","Catalan","Cheesesteaks","Chicken Wings","Chinese","Cantonese","Dim Sum","Shanghainese","Szechuan","Comfort Food","Creperies","Cuban","Czech","Delis","Diners","Ethiopian","Fast Food","Filipino","Fish & Chips","Fondue","Food Court","Food Stands","French","Gastropubs","German","Gluten-Free","Greek","Halal","Hawaiian","Himalayan/Nepalese","Hot Dogs","Hot Pot","Hungarian","Iberian","Indian","Indonesian","Irish","Italian","Japanese","Korean","Kosher","Laotian","Latin American","Colombian","Salvadoran","Venezuelan","Live/Raw Food","Malaysian","Mediterranean","Mexican","Middle Eastern","Egyptian","Lebanese","Modern European","Mongolian","Pakistani","Persian/Iranian","Peruvian","Pizza","Polish","Portuguese","Russian","Salad","Sandwiches","Scandinavian","Scottish","Seafood","Singaporean","Slovakian","Soul Food","Soup","Southern","Spanish","Steakhouses","Sushi Bars","Taiwanese","Tapas Bars","Tapas/Small Plates","Tex-Mex","Thai","Turkish","Ukrainian","Vegan","Vegetarian","Vietnamese"];async function es(e){try{const s=await I.get("/.netlify/functions/getCategories",{params:{latitude:e.coordinates.latitude,longitude:e.coordinates.longitude}});return s.data&&s.data.businesses?s.data.businesses:[]}catch{k.error("There was a problem finding food options in your area. Please choose from default list. ",{toastId:"fetchCategories"})}}function ts(e){return R({queryKey:["categories",e.coordinates],queryFn:async()=>{let s=await es({...e});s=s??[];const a=new Set;s.forEach(r=>{r.categories.forEach(i=>{a.add(i.title)})});let n=ee.filter(r=>a.has(r));return n=n.length>0?n:ee,n=[...n,"Fast Food","Brunch","Takeout","Breakfast","Lunch"].sort(),n},enabled:e.coordinates.latitude.length>0&&e.coordinates.longitude.length>0})}function D({className:e,...s}){return t.jsx("div",{className:c("animate-pulse rounded-md bg-muted",e),...s})}const H={Unselected:"unselected",Selected:"selected",Excluded:"excluded"},ss={selectedChoices:[],excludedChoices:[],isLoading:!1,showSelectionModal:!1,isHuntChoosing:!1};function as(){const[e,s]=l.useState(ss),a=q(s),n=G(),r=O(),{data:i=[],isFetching:d}=ts({coordinates:n.currentCoordinates});let f=i.map(u=>({id:u,name:u,state:H.Unselected}));const w=l.useMemo(()=>{let u=f;return e.excludedChoices.length>0&&(u=u.map(m=>e.excludedChoices.includes(m.name)?{...m,state:H.Excluded}:m)),e.selectedChoices.length>0&&(u=u.map(m=>e.selectedChoices.includes(m.name)?{...m,state:H.Selected}:m)),u},[f,e.excludedChoices,e.selectedChoices]),x=w.length<8?w.length:8;l.useEffect(()=>{if(e.selectedChoices.length>0&&!e.isLoading&&e.isHuntChoosing){const u=X(e.selectedChoices);n.setMunchHuntChoice(u),localStorage.setItem("choice",u),a({showSelectionModal:!0})}},[e.selectedChoices,e.isLoading,e.isHuntChoosing]),l.useEffect(()=>{e.showSelectionModal&&setTimeout(()=>{a({showSelectionModal:!1}),r("/restaurants")},3e3)},[e.showSelectionModal]);function b(u){if(e.excludedChoices.includes(u)){const m=e.excludedChoices.filter(j=>j!==u);a({excludedChoices:m})}else if(e.selectedChoices.includes(u)){const m=e.selectedChoices.filter(j=>j!==u);a({selectedChoices:m,excludedChoices:[...e.excludedChoices,u]})}else a({selectedChoices:[...e.selectedChoices,u]})}async function g(u){for(const m of u)await new Promise(j=>setTimeout(()=>{s(N=>({...N,selectedChoices:[...N.selectedChoices,m.name]})),j()},500))}function C(){if(e.selectedChoices.length===0){a({isLoading:!0,isHuntChoosing:!0});const m=Et(w,x);g(m).then(()=>{setTimeout(()=>{a({isLoading:!1})},1e3)})}else{const m=X(e.selectedChoices);n.setMunchHuntChoice(m),localStorage.setItem("choice",m),a({isLoading:!0}),setTimeout(()=>{a({showSelectionModal:!0,isLoading:!1})},2e3)}}return t.jsxs("div",{className:"max-h-screen bg-gray-50 dark:bg-transparent px-4 sm:py-12 py-6",children:[e.showSelectionModal&&ls(n.munchHuntChoice),t.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.isLoading?t.jsxs("div",{className:"flex h-16 mb-6 flex-col justify-center items-center",children:[t.jsx(ve,{className:"sm:h-[60px] sm:w-[60px] h-7 w-7 animate-spin text-customOrange dark:text-slate-400 duration-1000"}),t.jsx("p",{className:"mt-2 font-inter font-semibold text-slate-700 sm:text-base text-sm",children:"Munch Hunt is choosing for you..."})]}):t.jsxs("div",{className:"sm:text-center",children:[t.jsx("h1",{className:"sm:mb-4 md:text-4xl text-2xl text-center font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Let's get started!"}),t.jsx("p",{className:"mb-2 sm:text-base text-xs text-slate-600 dark:text-slate-300",children:"Choose multiple cuisines or categories you'd like, or double-click to exclude an option."}),t.jsx("p",{className:"sm:mb-12 mb-6 sm:text-base text-xs text-slate-600 dark:text-slate-300",children:"Can't decide? Munch Hunt will pick one for you if no options are selected"})]}),t.jsx("div",{className:"mb-6",children:e.isHuntChoosing?t.jsx(M,{className:"md:grid grid-cols-4 gap-4 p-1 py-3",xyz:"fade small out-down out-rotate-right appear-stagger",children:e.selectedChoices.map((u,m)=>t.jsx("div",{children:t.jsx(y,{className:"relative bg-slate-700 dark:text-white flex sm:h-14 h-11 w-full items-center justify-center rounded-lg border border-gray-200 text-center font-medium shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-[#FF7043] focus:dark:ring-slate-300 focus:ring-offset-2",children:t.jsx("p",{className:"font-semibold text-lg",children:u})})},`${m}-${u}`))}):t.jsx(ns,{cuisines:w,selected:e.selectedChoices,isLoading:d,onSelect:b})}),t.jsx("div",{className:"text-center",children:t.jsxs(y,{size:"lg",className:`sm:h-14 sm:mb-0 mb-5 h-11 bg-[#FF7043] dark:bg-slate-800 dark:text-white px-8 text-lg font-semibold hover:bg-orange-600 hover:dark:bg-slate-500 ${e.isHuntChoosing?"hidden":""}`,onClick:C,children:[t.jsx(bt,{className:"mr-2 h-5 w-5"}),"Hunt"]})})]})]})}function ns(e){const[s,a]=l.useState(!1);return l.useEffect(()=>{e.isLoading||setTimeout(()=>{a(!0)},500)},[e.isLoading]),t.jsx("div",{className:"2xl:max-h-fit md:max-h-2/3 max-h-80 overflow-y-scroll ",children:s?t.jsx(M,{appear:!0,className:"sm:p-1 p-2 grid sm:gap-4 gap-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 ",xyz:"fade small out-down out-rotate-right-0 duration-3 ",children:e.cuisines.map((n,r)=>t.jsx("div",{children:t.jsx(y,{className:`relative flex sm:h-14 h-11 w-full items-center justify-center rounded-lg border border-gray-200 text-center font-medium shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-[#FF7043] focus:dark:ring-slate-300 focus:ring-offset-2 ${rs(n.state)}`,onClick:()=>e.onSelect(n.name),children:n.name})},`${r}-${n}`))}):t.jsx("div",{className:"sm:p-1 p-2 grid sm:gap-4 gap-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:new Array(16).fill(null).map((n,r)=>t.jsx(D,{className:"relative flex sm:h-14 h-11 w-full items-center justify-center rounded-lg  text-center font-medium shadow-sm transition-all"},r))})})}function rs(e){switch(e){case"selected":return"bg-[#FF7043] dark:bg-slate-500 text-white hover:bg-[#FF7043]/90 hover:dark:bg-slate-700";case"excluded":return"bg-red-100 dark:bg-red-300 dark:text-red-800 text-red-500 hover:bg-red-200";default:return"bg-white dark:bg-slate-200 text-black hover:bg-gray-50 hover:dark:bg-gray-500"}}function ls(e){return t.jsx(Zt,{class:"md:bg-transparent",children:t.jsx(Y,{appear:!0,className:`bg-customOrange dark:bg-slate-700 ring-customOrange dark:ring-slateDark rounded-[15px]
        ring-[9px] ring-offset-1 ring-offset-transparent ring-opacity-45 dark:ring-opacity-45
        `,xyz:"small-100% origin-center",children:t.jsxs("div",{className:"flex flex-col justify-evenly items-center  sm:h-[200px] h-[150px] md:min-w-[400px] min-w-64 md:max-w-[600px] rounded-[30px] md:p-4 px-2",children:[t.jsx("p",{className:"font-roboto sm:text-lg text-base font-semibold text-white dark:text-slate-200",children:"The Hunt Chose"}),t.jsx("p",{className:"font-archivo font-bold sm:text-4xl text-2xl text-wrap dark:text-slate-200",children:e}),t.jsx(Y,{appear:!0,className:"mb-1",xyz:"fade flip-left perspective-1 delay-10 duration-10",children:t.jsx("div",{children:t.jsx(jt,{className:"dark:text-slate-200 w-8 h-10"})})})]})})})}async function is(e){try{const s=await I.get("/.netlify/functions/getRestaurants",{params:{food:e.food,latitude:e.coordinates.latitude,longitude:e.coordinates.longitude}});return s.data&&s.data.businesses?s.data.businesses:[]}catch{k.error("There was a problem finding restaurant options. Please try again.",{toastId:"fetchRestaurant"})}}function os(e){return R({queryKey:["yelpResults",e],queryFn:async()=>(await is({...e})??[]).map(n=>({alias:n.alias,coordinates:n.coordinates,displayAddress:n.location.display_address.join(),displayPhone:n.display_phone,distance:Ht(n.distance),id:n.id,imageURL:n.image_url,isClosed:n.is_closed,name:n.name,price:n.price,phone:n.phone,rating:n.rating,transactions:n.transactions})),enabled:e.food.length>0&&e.coordinates.latitude.length>0&&e.coordinates.longitude.length>0})}const Ie=l.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));Ie.displayName="Card";const ds=l.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:c("flex flex-col space-y-1.5 p-6",e),...s}));ds.displayName="CardHeader";const cs=l.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:c("text-2xl font-semibold leading-none tracking-tight",e),...s}));cs.displayName="CardTitle";const us=l.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:c("text-sm text-muted-foreground",e),...s}));us.displayName="CardDescription";const Ae=l.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:c("p-6 pt-0",e),...s}));Ae.displayName="CardContent";const Re=l.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:c("flex items-center p-6 pt-0",e),...s}));Re.displayName="CardFooter";function U(e){const s=e.rating%1===0;let a;s&&(a=new Array(e.rating).fill("star")),a=new Array(Math.floor(e.rating)).fill("stars"),a.push("half");const n=e.iconSize??16;return t.jsx(M,{className:`flex ${e.direction?"flex-start":"justify-end"}`,appear:!!e.direction,xyz:"fade small out-down out-rotate-right appear-stagger",children:a.map((r,i)=>t.jsx("div",{children:r==="stars"?t.jsx(vt,{size:n,className:" mr-1 group-hover:fill-[#ffcf40] group-hover:text-[#ffcf40] fill-slate-800 text-slate-800 dark:fill-slate-200 dark:text-slate-200 "}):t.jsx(wt,{size:n,className:" mr-1 group-hover:fill-[#ffcf40] group-hover:text-[#ffcf40] fill-slate-800 dark:fill-slate-200 text-slate-800 dark:text-slate-200 "})},i))})}function Me(e){const s={lat:e.coordintes.latitude,lng:e.coordintes.longitude},a={width:e.width?e.width:"400px",height:e.height?e.height:"400px"};return t.jsx("div",{className:"h-auto w-auto rounded-[40px]",children:t.jsx(Dt,{apiKey:"AIzaSyABjQkdFtZsRYvpOCFVAynAOEHPv5FYj2A",children:t.jsx(zt,{id:"munch_hunt_g_map",mapId:"63591389102871d8",style:a,defaultCenter:s,defaultZoom:15,disableDefaultUI:!1,children:t.jsx($t,{position:s})})})})}const $=l.forwardRef(({className:e,orientation:s="horizontal",decorative:a=!0,...n},r)=>t.jsx(ne,{ref:r,decorative:a,orientation:s,className:c("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));$.displayName=ne.displayName;const ms=at,Pe=l.forwardRef(({className:e,...s},a)=>t.jsx(re,{ref:a,className:c("inline-flex h-[40px] items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));Pe.displayName=re.displayName;const Le=l.forwardRef(({className:e,...s},a)=>t.jsx(le,{ref:a,className:c("inline-flex  items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));Le.displayName=le.displayName;const De=l.forwardRef(({className:e,...s},a)=>t.jsx(ie,{ref:a,className:c("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));De.displayName=ie.displayName;function xs(e){return t.jsxs(ms,{defaultValue:e.tabName[0],className:"w-[400px]",children:[t.jsx(Pe,{children:e.tabName.map((s,a)=>t.jsx(Le,{value:s,children:s},a))}),e.tabContent.map((s,a)=>t.jsx(De,{value:s.name,children:s.content},s.name))]})}const ze=l.createContext(null);function T(){const e=l.useContext(ze);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const $e=l.forwardRef(({orientation:e="horizontal",opts:s,setApi:a,plugins:n,className:r,children:i,...d},f)=>{const[w,x]=Ot({...s,axis:e==="horizontal"?"x":"y"},n),[b,g]=l.useState(!1),[C,u]=l.useState(!1),m=l.useCallback(p=>{p&&(g(p.canScrollPrev()),u(p.canScrollNext()))},[]),j=l.useCallback(()=>{x==null||x.scrollPrev()},[x]),N=l.useCallback(()=>{x==null||x.scrollNext()},[x]),o=l.useCallback(p=>{p.key==="ArrowLeft"?(p.preventDefault(),j()):p.key==="ArrowRight"&&(p.preventDefault(),N())},[j,N]);return l.useEffect(()=>{!x||!a||a(x)},[x,a]),l.useEffect(()=>{if(x)return m(x),x.on("reInit",m),x.on("select",m),()=>{x==null||x.off("select",m)}},[x,m]),t.jsx(ze.Provider,{value:{carouselRef:w,api:x,opts:s,orientation:e||((s==null?void 0:s.axis)==="y"?"vertical":"horizontal"),scrollPrev:j,scrollNext:N,canScrollPrev:b,canScrollNext:C},children:t.jsx("div",{ref:f,onKeyDownCapture:o,className:c("relative",r),role:"region","aria-roledescription":"carousel",...d,children:i})})});$e.displayName="Carousel";const Oe=l.forwardRef(({className:e,...s},a)=>{const{carouselRef:n,orientation:r}=T();return t.jsx("div",{ref:n,className:"overflow-hidden",children:t.jsx("div",{ref:a,className:c("flex",r==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...s})})});Oe.displayName="CarouselContent";const Te=l.forwardRef(({className:e,...s},a)=>{const{orientation:n}=T();return t.jsx("div",{ref:a,role:"group","aria-roledescription":"slide",className:c("min-w-0 shrink-0 grow-0 basis-full",n==="horizontal"?"pl-4":"pt-4",e),...s})});Te.displayName="CarouselItem";const He=l.forwardRef(({className:e,variant:s="outline",size:a="icon",...n},r)=>{const{orientation:i,scrollPrev:d,canScrollPrev:f}=T();return t.jsxs(y,{ref:r,variant:s,size:a,className:c("absolute  h-8 w-8 rounded-full",i==="horizontal"?"sm:-left-2 -left-0 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!f,onClick:d,...n,children:[t.jsx(yt,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Previous slide"})]})});He.displayName="CarouselPrevious";const Ee=l.forwardRef(({className:e,variant:s="outline",size:a="icon",...n},r)=>{const{orientation:i,scrollNext:d,canScrollNext:f}=T();return t.jsxs(y,{ref:r,variant:s,size:a,className:c("absolute h-8 w-8 rounded-full",i==="horizontal"?"sm:-right-4 -right-0 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!f,onClick:d,...n,children:[t.jsx(Nt,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Next slide"})]})});Ee.displayName="CarouselNext";function Be(e){return t.jsxs($e,{children:[t.jsx(Oe,{children:e.items.map((s,a)=>t.jsx(Te,{className:e.class??"h-[400px] w-[400px] rounded-md",children:t.jsx("img",{src:s,alt:"restaurant pics",className:"object-cover h-full w-full rounded-md"})},a))}),t.jsx(He,{className:"bg-slate-600 text-white"}),t.jsx(Ee,{className:"bg-slate-600 text-white"})]})}const _e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function hs(e){l.useEffect(()=>{const i=d=>{d.key==="Escape"&&a()};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[e.onClose,a]);const s=e.isOpen??!0;function a(){return e.onClose?e.onClose():null}let n=e.business.displayAddress.replace(/ /g,"+");if(n="https://www.google.com/maps/search/?api=1&query=1600+"+n,!s)return null;const r=e.business.hours[0]??void 0;return t.jsx("div",{className:"fixed inset-0 flex justify-center items-center z-[100] visible bg-black bg-opacity-50",onClick:a,children:t.jsx("div",{className:c(`flex flex-col p-4 rounded-lg sm:bg-slate-50 dark:bg-slate-900   ${s?"animate-scrollOpen":"animate-scrollClose"}`,e.class),onClick:i=>i.stopPropagation(),children:e.isLoading?t.jsx("div",{className:"md:w-[850px] md:h-[550px] sm:h-screen h-dvh bg-slate-50 dark:bg-slate-900  rounded-xl px-6 py-3  flex flex-col justify-center items-center  cursor-default",children:t.jsx(we,{className:"h-20 w-20 animate-spin text-slate-400 opacity-55"})}):t.jsxs("div",{className:"md:w-[850px] md:h-[550px] sm:h-screen h-dvh bg-slate-50 dark:bg-slate-900 rounded-xl px-6 py-3  flex flex-col  cursor-default",children:[t.jsxs("div",{className:"w-full flex justify-between items-center mb-3 ",children:[t.jsx("div",{className:"w-3/4 font-archivo md:text-[30px] text-[20px]  truncate",children:e.business.name}),e.showClose&&t.jsx("div",{className:"",onClick:a,children:t.jsx(Ct,{className:" text-black dark:text-white dark:hover:text-slate-700 hover:text-customOrange",size:30})})]}),t.jsxs("div",{className:"w-full h-full  flex",children:[t.jsxs("div",{className:"md:w-2/4 h-full flex flex-col px-2 ",children:[t.jsxs("div",{className:"flex items-center md:h-[50px] h-[50px] mt-1 justify-between",children:[t.jsx(U,{rating:e.business.rating,direction:"start",iconSize:24}),t.jsx("p",{className:"font-semibold text-lg mt-2",children:e.business.price??"--"})]}),t.jsx("div",{className:"flex w-full text-wrap",children:e.business.categories.map((i,d)=>t.jsx("p",{className:"mr-1 text-sm italic text-slate-500 font-light",children:i.title},`${i.name}-${d}`))}),t.jsx($,{orientation:"horizontal",className:"h-[2px]  mt-2 dark:bg-slate-400"}),t.jsxs("div",{className:"flex flex-col items-start text-right font-roboto tracking-normal ",children:[t.jsxs("div",{className:"w-full flex justify-between items-center mt-1 p-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-sm",children:[t.jsx("a",{href:n,target:"_blank",className:"text-wrap",children:e.business.displayAddress}),t.jsx(A,{className:"h-[20px] text-slate-500 dark:text-slate-200"})]}),t.jsxs("div",{className:"w-full flex justify-between items-center mt-1 p-1 rounded-sm",children:[t.jsx("a",{href:`tel:${e.business.phone}`,children:e.business.displayPhone}),t.jsx(ye,{className:"h-[20px] text-slate-500 dark:text-slate-200"})]}),t.jsxs("div",{className:"w-full flex justify-between items-center mt-1 p-1 rounded-sm",children:[t.jsx("p",{children:"Hours"}),t.jsx(kt,{className:"h-[20px] text-slate-500 dark:text-slate-200"})]}),t.jsx("div",{className:"max-h-[200px] w-full overflow-auto",children:r?t.jsx("div",{className:"flex flex-col w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2",children:t.jsx("div",{className:" overflow-auto w-full flex flex-col items-start",children:r.open.map((i,d)=>t.jsxs("div",{className:"w-full flex justify-between text-sm",children:[t.jsxs("p",{className:"mb-1 px-1",children:[_e[i.day],": "]}),t.jsxs("p",{children:[" ",Ce(i.start,i.end)]})]},`${i.day}-${d}`))})}):null}),t.jsx("div",{className:"w-full mt-5",children:t.jsx(y,{variant:"outline",className:"hover:bg-red-400 hover:text-white ",onClick:()=>window.open(e.business.url,"_blank"),children:"Visit Yelp page"})})]})]}),t.jsxs("div",{className:"flex ",children:[t.jsx($,{orientation:"vertical",className:"mr-4 dark:bg-slate-400 "}),t.jsx(xs,{tabName:["Map","Photos"],tabContent:[{name:"Map",content:t.jsx("div",{children:t.jsx(Me,{coordintes:e.business.coordinates,height:420})})},{name:"Photos",content:t.jsx("div",{className:"max-h-full",children:t.jsx(Be,{items:e.business.photos})})}]})]})]})]})})})}const fs=rt,gs=lt,ps=l.forwardRef(({className:e,inset:s,children:a,...n},r)=>t.jsxs(oe,{ref:r,className:c("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none  data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",e),...n,children:[a,t.jsx(St,{className:"ml-auto"})]}));ps.displayName=oe.displayName;const bs=l.forwardRef(({className:e,...s},a)=>t.jsx(de,{ref:a,className:c("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));bs.displayName=de.displayName;const We=l.forwardRef(({className:e,sideOffset:s=4,...a},n)=>t.jsx(nt,{children:t.jsx(ce,{ref:n,sideOffset:s,className:c("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));We.displayName=ce.displayName;const qe=l.forwardRef(({className:e,inset:s,...a},n)=>t.jsx(ue,{ref:n,className:c("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors  data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-customOrange hover:text-white",s&&"pl-8",e),...a}));qe.displayName=ue.displayName;const js=l.forwardRef(({className:e,children:s,checked:a,...n},r)=>t.jsxs(me,{ref:r,className:c("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(xe,{children:t.jsx(Ft,{className:"h-4 w-4"})})}),s]}));js.displayName=me.displayName;const vs=l.forwardRef(({className:e,children:s,...a},n)=>t.jsxs(he,{ref:n,className:c("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(xe,{children:t.jsx(It,{className:"h-2 w-2 fill-current"})})}),s]}));vs.displayName=he.displayName;const ws=l.forwardRef(({className:e,inset:s,...a},n)=>t.jsx(fe,{ref:n,className:c("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...a}));ws.displayName=fe.displayName;const ys=l.forwardRef(({className:e,...s},a)=>t.jsx(ge,{ref:a,className:c("-mx-1 my-1 h-px bg-muted",e),...s}));ys.displayName=ge.displayName;function E(e){function s(n){e.onChange({name:e.title.toLowerCase(),value:n.value})}const a=e.value.length>0?e.value:e.title;return t.jsxs(fs,{children:[t.jsxs(gs,{className:`w-full h-[40px] flex justify-between items-center border-2 text-sm
          hover:bg-slate-900 hover:text-white rounded-md m-1 py-2 px-1 focus:outline-orange-300`,children:[a,t.jsx(Ne,{className:"h-4 w-4"})]}),t.jsx(We,{side:"bottom",children:e.options.map((n,r)=>t.jsx(qe,{className:`md:w-[170px] bg-slate-900  ${e.value===n.value?"bg-customOrange dark:bg-slate-600 text-white":"text-black bg-slate-50 dark:bg-slate-900 dark:text-slate-200 font-roboto"}`,onChange:()=>s(n),onClick:()=>s(n),children:n.label},`${r}-${n.value}`))})]})}function B(e){const s=e.disabled??!1;return t.jsxs("div",{className:"flex flex-col ",children:[e.label&&t.jsx("p",{className:"font-roboto text-slate-500 mt-2 dark:text-slate-100",children:e.label}),e.options.map((a,n)=>t.jsx(y,{disabled:s,variant:"outline",className:`mb-1 hover:bg-slate-900 dark:bg-slate-700 dark:text-slate-100 hover:text-white border-[1px] w-full h-[30px] flex justify-between ${e.value===a.value?"bg-customOrange  dark:bg-slate-400 text-white ":""}`,onClick:()=>e.handleChange({name:e.filterName,value:a.value}),children:a.label},n))]})}const Ns=dt,Ge=l.forwardRef(({className:e,...s},a)=>t.jsx(it,{ref:a,className:c("border-b",e),...s}));Ge.displayName="AccordionItem";const Ke=l.forwardRef(({className:e,children:s,...a},n)=>t.jsx(ot,{className:"flex",children:t.jsxs(pe,{ref:n,className:c("flex dark:text-slate-200 flex-1 items-center justify-between py-2 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180 hover:bg-slate-300 dark:hover:bg-slate-500  rounded-sm px-2",e),...a,children:[s,t.jsx(Ne,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Ke.displayName=pe.displayName;const Ve=l.forwardRef(({className:e,children:s,...a},n)=>t.jsx(be,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:t.jsx("div",{className:c("pb-4 pt-0",e),children:s})}));Ve.displayName=be.displayName;function z(e){return t.jsx(Ns,{type:"single",defaultValue:e.isOpen?"item-1":"",collapsible:!0,className:e.class,children:t.jsxs(Ge,{value:"item-1",className:e.borderBottomOff?"border-b-0":"",children:[t.jsx(Ke,{className:e.triggerClass,children:e.title}),t.jsx(Ve,{className:e.contentClass,children:e.children})]})})}function Cs(e){const s=e.isOpen??!0;function a(){return e.onClose?e.onClose():null}let n=e.business.displayAddress.replace(/ /g,"+");if(n="https://www.google.com/maps/search/?api=1&query=1600+"+n,!s)return null;const r=e.business.hours[0]??void 0,i=window.innerWidth-20;return t.jsx("div",{className:`fixed inset-0 flex justify-center items-center h-dvh z-[100] ${s?"visible bg-black bg-opacity-50":"invisible"}`,onClick:a,children:t.jsx("div",{className:c("relative flex flex-col h-dvh ",e.class),onClick:d=>d.stopPropagation(),children:e.isLoading?t.jsx("div",{className:"w-screen h-dvh bg-slate-50 dark:bg-slate-900  rounded-xl px-6 py-3  flex flex-col justify-center items-center cursor-default ",children:t.jsx(we,{className:"h-20 w-20 text-slate-400 animate-spin opacity-55 "})}):t.jsxs("div",{className:"w-screen h-dvh bg-slate-50 dark:bg-slate-900 flex md:flex-row flex-col cursor-default px-3 overflow-y-scroll",children:[t.jsx("div",{className:"mt-2 max-h-[200px] ",children:t.jsx(Be,{class:"h-[200px]",items:e.business.photos})}),t.jsxs("div",{className:"flex flex-col items-start justify-center",children:[t.jsxs("div",{className:"w-full flex justify-between items-center ",children:[t.jsx("div",{className:"font-archivo text-base truncate text-wrap mt-3",children:e.business.name}),t.jsx(U,{rating:e.business.rating,direction:"start",iconSize:15})]}),t.jsx("p",{className:"font-semibold ",children:e.business.price??"--"}),t.jsx("div",{className:"flex w-full text-wrap py-1",children:e.business.categories.map((d,f)=>t.jsx("p",{className:"mr-1 text-xs italic text-slate-500 dark:text-slate-400 font-light",children:d.title},`${d.name}-${f}`))}),t.jsx($,{orientation:"horizontal",className:"h-[2px] mt-1 mb-2"})]}),t.jsxs("div",{className:"flex flex-col items-start text-right font-roboto tracking-normal",children:[t.jsxs("div",{className:"flex justify-between w-full items-center mt-1 mb-2 hover:bg-slate-200 dark:hover:bg-slate-500 rounded-sm",onClick:()=>window.open(n,"_blank"),children:[t.jsx("a",{href:n,target:"_blank",className:"text-wrap text-left text-sm",children:e.business.displayAddress}),t.jsx(A,{className:"h-[20px] text-slate-500 dark:text-slate-200"})]}),t.jsxs("div",{className:"flex justify-between w-full items-center mt-3 mb-2 rounded-sm hover:bg-slate-200",children:[t.jsx("a",{href:`tel:${e.business.phone}`,className:"text-wrap text-left text-sm",children:e.business.displayPhone}),t.jsx(ye,{className:"h-[20px] text-slate-500 dark:text-slate-200"})]}),t.jsx(z,{class:"w-full mt-2",triggerClass:"h-8 mb-1 text-sm p-0 font-normal px-[2px]",title:"Hours",borderBottomOff:!0,children:r?t.jsx("div",{className:"flex flex-col w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2",children:t.jsx("div",{className:" overflow-auto w-full flex flex-col items-start",children:r.open.map((d,f)=>t.jsxs("div",{className:"w-full flex justify-between text-sm",children:[t.jsxs("p",{className:"mb-1 px-1",children:[_e[d.day],": "]}),t.jsxs("p",{children:[" ",Ce(d.start,d.end)]})]},`${d.day}-${f}`))})}):null}),t.jsxs("div",{className:"w-full mt-3 flex justify-between  p-1 rounded-sm hover:bg-red-400 hover:text-white",onClick:()=>window.open(e.business.url,"_blank"),children:[t.jsx("p",{className:"text-sm",children:" Visit Yelp page"}),t.jsx(W,{className:"h-[20px] text-slate-500 dark:text-slate-200"})]}),t.jsx("div",{className:"mt-4 mb-3",children:t.jsx(Me,{coordintes:e.business.coordinates,height:300,width:i})})]}),t.jsx("div",{className:"fixed w-full flex bottom-1 ",children:t.jsx(y,{className:"dark:bg-slate-900 dark:text-slate-200",onClick:a,children:"close"})})]})})})}async function ks(e){try{const s=await I.get("/.netlify/functions/getBusiness",{params:{businessID:e.businessID}});return s.data?s.data:void 0}catch{k.error("There was a problem location information about this business.",{toastId:"fetchBusiness"})}}function Ss(e){return R({queryKey:["business",e.businessID],queryFn:async()=>{const s=await ks({...e});return s?{name:s.name,id:s.id,photos:s.photos,url:s.url,categories:s.categories,hours:s.hours.map(n=>({hoursType:n.hours_type,isOpenNow:n.is_open_now,open:n.open.map(r=>({day:r.day,end:r.end,isOvernight:r.is_overnight,start:r.start}))}))}:void 0},enabled:e.businessID.length>0})}const te=new Array(5).fill("$").map((e,s)=>{const a=e.repeat(s+1);return{label:a,value:a}}),se=new Array(5).fill("").map((e,s)=>{const a=s+1;return{label:a.toString()+(s===0?" Star":" Stars"),value:a.toString()}}),ae=["<1","1","5","10","25"].map((e,s)=>{const a=e==="<1"?"0.9":e;return{label:e+" ml",value:a}}),Fs={distanceFilter:null,isSmallWindow:!1,isClosedFilter:null,priceFilter:null,ratingFilter:null,selectedRestaurantID:null,showShadow:!1};function Is(){var o,p,J,Q;const[e,s]=l.useState(Fs),a=q(s),n=O(),r=G(),{munchHuntChoice:i,currentCoordinates:d}=r,{data:f=[],isLoading:w=!1,isFetching:x}=os({food:i,coordinates:d}),b=je.keyBy(f,"id"),{data:g,isFetching:C}=Ss({businessID:e.selectedRestaurantID??""});l.useEffect(()=>{window.innerWidth<700?a({isSmallWindow:!0}):a({isSmallWindow:!1})},[window.innerWidth,window.innerHeight]);const u=l.useMemo(()=>{if(!e.distanceFilter&&!e.ratingFilter&&!e.priceFilter)return f;let h=f;return h=h.filter(v=>{const S=e.priceFilter===null||v.price!==void 0&&v.price===e.priceFilter,F=e.isClosedFilter==="Open",P=e.isClosedFilter===null||v.isClosed!==F,Ue=e.distanceFilter===null||Number(v.distance)<=e.distanceFilter,Je=e.ratingFilter===null||Tt(v.rating,e.ratingFilter,e.ratingFilter+1);return S&&P&&Ue&&Je}),h=h.sort((v,S)=>{if(!e.distanceFilter)return 0;const F=Number(v.distance),P=Number(S.distance);return F>P?-1:P<F?1:0}),h},[f,e.priceFilter,e.distanceFilter,e.ratingFilter,e.isClosedFilter]);function m(h){e.selectedRestaurantID===h?a({selectedRestaurantID:null}):a({selectedRestaurantID:h})}function j(h){var F;let v=h.value;const S=`${h.name}Filter`;if(((F=e[`${S}`])==null?void 0:F.toString())===h.value){a({[S]:null});return}switch(h.name){case"price":{v=h.value;break}case"rating":{v=Number(h.value);break}case"distance":{v=Number(h.value);break}case"isClosed":{v=h.value==="Open"?"Open":null;break}}a({[S]:v})}function N(){if(e.selectedRestaurantID===null)return null;const h=b[e.selectedRestaurantID],v={name:g?g.name:h.name,id:g?g.id:h.id,displayAddress:h.displayAddress,rating:h.rating,transactions:h.transactions,price:h.price,phone:h.phone,displayPhone:h.displayPhone,coordinates:h.coordinates,categories:g?g.categories:[],photos:g?g.photos:[],url:g?g.url:"",hours:g?g.hours:[]};return t.jsx(t.Fragment,{children:e.isSmallWindow?t.jsx(Cs,{showClose:!0,isLoading:C,isSmallWindow:e.isSmallWindow,business:v,onClose:()=>a({selectedRestaurantID:null})}):t.jsx(hs,{showClose:!0,isLoading:C,isSmallWindow:e.isSmallWindow,business:v,onClose:()=>a({selectedRestaurantID:null})})})}return t.jsxs("div",{className:"relative max-h-screen bg-slate-100 dark:bg-slate-950",children:[N(),t.jsxs("header",{className:"flex justify-between items-center pr-2 sticky top-0 z-[90]  border-b  bg-customOrange dark:bg-slate-600",children:[t.jsxs("div",{className:"flex h-16 items-center px-4",children:[t.jsx(y,{variant:"ghost",size:"icon",className:"sm:mr-4 hover:bg-orange-600 hover:dark:bg-slate-800",onClick:()=>n("/select"),children:t.jsx(At,{className:"h-6 w-6"})}),t.jsxs("div",{className:"flex sm:flex-col flex-row",children:[t.jsx("p",{className:"text-sm sm:block hidden text-slate-800 dark:text-slate-300",children:"The Hunt Chose"}),t.jsx("h1",{className:" font-archivo text-xl font-semibold",children:r.munchHuntChoice})]})]}),t.jsx(V,{})]}),t.jsxs("div",{className:"flex sm:flex-row flex-col",children:[t.jsxs("div",{className:"flex flex-row h-[95%] sm:hidden mb-2",children:[t.jsx(E,{title:"Price",options:te,value:e.priceFilter??"",onChange:j}),t.jsx(E,{title:"Distance",options:ae,value:((o=e.distanceFilter)==null?void 0:o.toString())??"",onChange:j}),t.jsx(E,{title:"Rating",options:se,value:((p=e.ratingFilter)==null?void 0:p.toString())??"",onChange:j})]}),t.jsx("aside",{className:"sticky top-0 hidden sm:block h-screen   w-[300px] border-r dark:border-r-slate-900 bg-slate-50 dark:bg-slate-900",children:t.jsxs("div",{className:"flex flex-col md:px-10 sm:px-2 px-1 py-2 max-h-full overflow-y-scroll ",children:[t.jsx("p",{className:"font-inter hidden md:block font-semibold text-lg text-slate-500 dark:text-slate-100 mt-2",children:"Filter By"}),t.jsx("div",{}),t.jsxs("div",{className:"md:flex hidden flex-col overflow-auto text-slate-500 mt-4",children:[t.jsx(z,{title:"Price",isOpen:!0,children:t.jsx(B,{filterName:"price",disabled:f.length===0,options:te,value:e.priceFilter??"",handleChange:j})}),t.jsx(z,{title:"Distance",isOpen:!0,children:t.jsx(B,{filterName:"distance",disabled:f.length===0,options:ae,value:((J=e.distanceFilter)==null?void 0:J.toString())??"",handleChange:j})}),t.jsx(z,{title:"Rating",children:t.jsx(B,{filterName:"rating",disabled:f.length===0,options:se,value:((Q=e.ratingFilter)==null?void 0:Q.toString())??"",handleChange:j})})]})]})}),t.jsx("main",{className:"flex-1 sm:px-6 mb-4",children:t.jsx(As,{restaurants:u,isLoading:w,isFetching:x,onSelect:m})})]})]})}function As(e){return!e.isFetching&&e.restaurants.length===0?t.jsx("div",{className:"h-screen w-full flex justify-center items-center  opacity-20 mt-2",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx(Rt,{className:"h-28 w-28 "}),t.jsx("p",{className:"font-anton text-lg",children:"No results"})]})}):t.jsx("div",{className:"sm:pt-4 h-screen overflow-y-scroll",children:e.isLoading?t.jsx(Rs,{}):t.jsx(M,{appear:e.restaurants.length>0,className:"grid md:grid-cols-3 grid-cols-1 gap-5 gap-y-5",xyz:"fade small out-down out-rotate-right-0",children:e.restaurants.map((s,a)=>{let n="Available for ";return s.transactions.forEach(r=>{if(r.includes("_")){const i=r.split("_").join(" ");n=n.concat(`${i} `)}else n=n.concat(`${r} `)}),t.jsx("div",{className:"sm:h-[300px] h-[200px] px-5",children:t.jsxs(Ie,{className:"group w-full h-full  flex flex-col justify-between  border-none bg-white dark:bg-slate-800 dark:border-2 shadow-none hover:shadow-2xl hover:border-4 hover:bg-[#FAFAFA] dark:hover:bg-slate-700 cursor-pointer",onClick:()=>e.onSelect(s.id),children:[t.jsxs(Ae,{className:"w-full h-5/6 overflow-hidden p-0 rounded-lg rounded-br-none rounded-bl-none  relative",children:[t.jsxs("div",{className:`absolute top-0 right-0 z-10 w-[250px] p-3 flex flex-col items-end text-[20px] font-bold text-white
                      opacity-0 group-hover:opacity-100  -translate-x-10 transition-transform duration-500 ease-in-out group-hover:translate-x-0 rounded-lg
                      drop-shadow-md `,children:[t.jsx("p",{className:"text-[16px] text-right text-wrap",style:{textShadow:"2px 2px 4px rgba(0, 0, 0, 0.9)"},children:s.displayAddress}),t.jsx("p",{className:"text-[14px]",style:{textShadow:"2px 2px 4px rgba(0, 0, 0, 0.9)"},children:s.displayPhone}),s.transactions.length>0&&t.jsx("div",{className:" text-[11px] flex justify-end text-wrap drop-shadow-lg rounded-lg",children:t.jsx("p",{className:"text-wrap text-right",style:{textShadow:"2px 2px 4px rgba(0, 0, 0, 0.9)"},children:n})})]}),t.jsx("img",{className:"object-cover h-full w-full",alt:"food",src:s.imageURL})]}),t.jsxs(Re,{className:"px-2 py-1 w-full flex flex-col justify-between items-start text-sm mt-1 font-radioCanada",children:[t.jsxs("div",{className:"w-full flex justify-between ",children:[t.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100 text-[14px] text-wrap",children:s.name}),t.jsx(U,{rating:s.rating})]}),t.jsxs("div",{className:"flex w-full",children:[t.jsx("p",{className:"mr-2 font-semibold",children:s.price?s.price:"--"}),t.jsx("p",{className:"text-slate-700 dark:text-slate-200",children:`${s.distance} miles away`})]})]})]})},`${a}-${s.id}`)})})})}function Rs(){const e=new Array(9).fill("item");return t.jsx(M,{appear:!0,className:"grid md:grid-cols-3 grid-cols-1 gap-5 px-3",xyz:"fade small out-down out-rotate-right-0",children:e.map((s,a)=>t.jsxs("div",{className:"w-full h-full text-center md:text-left  ",children:[t.jsx(D,{className:"w-[100%] h-[190px] bg-slate-200"},`main-skel-${a}`),t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx(D,{className:"w-2/5 mt-1 bg-slate-200"},`sub-address-${a}`),t.jsx(D,{className:"w-[50%] h-[10px] mt-1 bg-slate-200"},`sub-star-${a}`)]})]},a))})}function Ms(){return t.jsx(Jt,{children:t.jsxs(Wt,{children:[t.jsx(xt,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0}),t.jsx(Xe,{children:t.jsx(Lt,{children:t.jsxs(L,{path:"/",element:t.jsx(Xt,{}),children:[t.jsx(L,{index:!0,element:t.jsx(Yt,{})}),t.jsx(L,{path:"select",element:t.jsx(as,{})}),t.jsx(L,{path:"restaurants",element:t.jsx(Is,{})})]})})})]})})}const Ps=new ut,Ls=Ye.createRoot(document.getElementById("root"));Ls.render(t.jsx(Qe.StrictMode,{children:t.jsx(mt,{client:Ps,children:t.jsx(Ms,{})})}));
